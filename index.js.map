{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/helpers.js","../src/js/modal.js","../src/js/constants.js","../src/js/products-api.js","../src/js/render-function.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["export const refs = {\n    categoriesList: document.querySelector('.categories'),\n    productsList: document.querySelector('.products'),\n    divNotFound: document.querySelector('.not-found'),\n    loadMoreBtn: document.querySelector('.load-more-btn'),\n    searchForm: document.querySelector('.search-form'),\n    formBtnClearValue: document.querySelector('.search-form__btn-clear'),\n    modal: document.querySelector('.modal'),\n    modalProduct: document.querySelector('.modal-product'),\n    modalCloseBtn: document.querySelector('.modal__close-btn'),\n    modalWishlistBtn: document.querySelector('.modal-product__btn--wishlist'),\n}","import { refs } from \"./refs\";\n\nexport function removeClassCategory(className) {\n    const allBtn = document.querySelectorAll('.categories__btn');\n\n    Array.from(allBtn).forEach(item => {\n        item.classList.remove(`${className}`)\n    });\n}\n\nexport function loadMoreBtnIsVisible() {\n    refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function loadMoreBtnIsHidden() {\n    refs.loadMoreBtn.classList.add('is-hidden');\n}","import { refs } from \"./refs\";\nimport { setStorage } from \"./storage\";\n\nexport function modalClose() {\n    refs.modal.classList.remove('modal--is-open');\n}\n\nexport function modalOpen() {\n    refs.modal.classList.add('modal--is-open');\n}\n\n// export function onModalWishlistBtnClick(event) {\n//     refs.modalWishlistBtn.textContent = 'Remove from Wishlist';\n//     console.dir(event.target.closest('.modal__content').children['.modal-product']);\n\n\n//     // setStorage()\n// }","export const API_BASE_URL = \"https://dummyjson.com/products\";\n\nexport const API_ENDPOINTS = {\n    CATEGORIES: \"/category-list\",\n    CATEGORY: \"/category\",\n    SEARCH: \"/search\",\n}\n\nexport const ITEMS_PER_PAGE = 12;\n\n","import axios from 'axios';\nimport { API_BASE_URL, API_ENDPOINTS, ITEMS_PER_PAGE } from './constants';\n\naxios.defaults.baseURL = API_BASE_URL;\n\nexport async function getCategories() {\n    const results = await axios(`${API_ENDPOINTS.CATEGORIES}`);\n\n    return results.data;\n}\n\nexport async function getProducts(currentPage) {\n    const skip = (currentPage - 1) * ITEMS_PER_PAGE;\n\n    const { data } = await axios(`?limit=${ITEMS_PER_PAGE}&skip=${skip}`);\n    return data;\n}\n\nexport async function getOneCategory(category, currentPage) {\n    const skip = (currentPage - 1) * ITEMS_PER_PAGE;\n\n    const { data } = await axios(`${API_ENDPOINTS.CATEGORY}/${category}?limit=${ITEMS_PER_PAGE}&skip=${skip}`);\n\n    return data;\n}\n\nexport async function getIdProduct(id) {\n    const results = await axios(`/${id}`);\n    return results.data;\n}\n\nexport async function getSearchProduct(search, currentPage) {\n    const skip = (currentPage - 1) * ITEMS_PER_PAGE;\n    const data = await axios(`${API_ENDPOINTS.SEARCH}?q=${search}&limit=${ITEMS_PER_PAGE}&skip=${skip}`);\n    return data.data\n}\n","import { refs } from \"./refs\";\n\nexport function renderProducts(products) {\n\n    const markup = products.map(({ id, thumbnail, title, brand, category, price }) => `\n    <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: $${price}</p>\n </li>\n `).join(\"\");\n\n    refs.productsList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function renderCategories(categories) {\n    const markup = categories.map(category => `\n    <li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${category}</button>\n </li>\n    `).join('')\n\n    refs.categoriesList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearProducts() {\n    refs.productsList.innerHTML = '';\n}\n\nexport function renderModalProduct({ id, thumbnail, title, tags, description, shippingInformation, returnPolicy, price, }) {\n\n    const marcup = `\n    <img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" data-id=\"${id}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p >\n        <ul class=\"modal-product__tags\">${tags.join(', ')}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: $${price}</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div >\n    `;\n    refs.modalProduct.innerHTML = marcup;\n}","import { loadMoreBtnIsHidden, loadMoreBtnIsVisible, removeClassCategory } from \"./helpers\";\nimport { modalClose, modalOpen, } from \"./modal\";\nimport { getCategories, getIdProduct, getOneCategory, getProducts, getSearchProduct } from \"./products-api\";\nimport { refs } from \"./refs\";\nimport { clearProducts, renderCategories, renderModalProduct, renderProducts } from \"./render-function\";\nimport { getStorage, setStorage } from \"./storage\";\n\nlet currentPage = 1;\nlet textCategory = 'all';\nlet isSearch = false;\nlet searchValue = null;\nlet idProduct = null;\n\n\nexport async function initHomePage() {\n    try {\n        const { products, total } = await getProducts(currentPage);\n        renderProducts(products);\n        if (total > 12) {\n            loadMoreBtnIsVisible();\n        }\n    } catch (error) {\n        console.log(error);\n    }\n\n    try {\n        const categories = ['all', ...await getCategories()];\n        renderCategories(categories);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport async function handlerCategoriesList(event) {\n    currentPage = 1;\n    isSearch = false;\n    if (event.target.tagName !== \"BUTTON\") {\n        return;\n    }\n\n    clearProducts();\n    loadMoreBtnIsHidden();\n    refs.divNotFound.classList.remove('not-found--visible');\n    removeClassCategory('categories__btn--active');\n    event.target.classList.add('categories__btn--active')\n\n    textCategory = event.target.textContent;\n\n    if (textCategory === 'all') {\n        try {\n            const { products, total } = await getProducts(currentPage);\n            renderProducts(products);\n            if (total > 12) {\n                loadMoreBtnIsVisible();\n            }\n        } catch (error) {\n            console.log(error);\n        }\n        return;\n    }\n\n    try {\n        const { products, total } = await getOneCategory(textCategory, currentPage);\n\n        if (total === 0) {\n            refs.divNotFound.classList.add('not-found--visible');\n            return;\n        }\n        renderProducts(products);\n        if (total > 12) {\n            loadMoreBtnIsVisible();\n        }\n    } catch (error) {\n        console.log(error);\n\n    }\n}\n\nexport async function handlerLoadMoreBtn() {\n    currentPage++;\n    loadMoreBtnIsHidden();\n    if (textCategory === 'all') {\n        try {\n            const { products, total } = await getProducts(currentPage);\n            renderProducts(products);\n            if (total > 12 * currentPage) {\n                loadMoreBtnIsVisible();\n            }\n        } catch (error) {\n            console.log(error);\n        }\n        return;\n    }\n    if (isSearch) {\n        try {\n            const { products, total } = await getSearchProduct(searchValue, currentPage);\n            renderProducts(products);\n            if (total > 12 * currentPage) {\n                loadMoreBtnIsVisible();\n            }\n        } catch (error) {\n            console.log(error);\n        }\n        return;\n    }\n    try {\n        const { products, total } = await getOneCategory(textCategory, currentPage);\n        renderProducts(products);\n        if (total > 12 * currentPage) {\n            loadMoreBtnIsVisible();\n        }\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport async function handlerProductsList(event) {\n    if (!event.target.closest('.products__item')) {\n        return;\n    }\n    idProduct = event.target.closest('.products__item').dataset.id\n\n    try {\n        const product = await getIdProduct(idProduct);\n        renderModalProduct(product);\n        modalOpen();\n        refs.modalCloseBtn.addEventListener('click', modalClose);\n        refs.modalWishlistBtn.addEventListener('click', onModalWishlistBtnClick)\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport async function handlerSearchForm(event) {\n    event.preventDefault();\n\n    searchValue = event.target.elements.searchValue.value.trim().toLowerCase();\n    textCategory = searchValue;\n    if (!searchValue) {\n        alert('Введіть пошукове слово');\n        return;\n    }\n\n    currentPage = 1;\n    clearProducts();\n    loadMoreBtnIsHidden();\n    refs.divNotFound.classList.remove('not-found--visible');\n\n    try {\n        const { products, total } = await getSearchProduct(searchValue, currentPage);\n        if (total === 0) {\n            refs.divNotFound.classList.add('not-found--visible');\n            return;\n        }\n        renderProducts(products);\n        if (total > 12) {\n            isSearch = true;\n            loadMoreBtnIsVisible();\n        }\n\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport async function handlerformBtnClearValue() {\n    refs.searchForm.elements.searchValue.value = '';\n    clearProducts();\n    loadMoreBtnIsHidden();\n    try {\n        const { products, total } = await getProducts(currentPage);\n        renderProducts(products);\n        if (total > 12) {\n            loadMoreBtnIsVisible();\n        }\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n// function onModalWishlistBtnClick(event) {\n//     refs.modalWishlistBtn.textContent = 'Remove from Wishlist';\n//     const idProductArr = [];\n\n//     console.log(getStorage());\n//     const qqqq = getStorage()\n//     console.log('qqqq', qqqq);\n\n//     idProductArr.push(idProduct);\n\n\n//     console.log(idProductArr);\n\n//     setStorage(idProductArr);\n\n// }","import { handlerCategoriesList, handlerformBtnClearValue, handlerLoadMoreBtn, handlerProductsList, handlerSearchForm, initHomePage } from \"./js/handlers\";\nimport { refs } from \"./js/refs\";\n\ndocument.addEventListener('DOMContentLoaded', initHomePage);\n\nrefs.categoriesList.addEventListener('click', handlerCategoriesList);\nrefs.loadMoreBtn.addEventListener('click', handlerLoadMoreBtn);\nrefs.productsList.addEventListener('click', handlerProductsList);\nrefs.searchForm.addEventListener('submit', handlerSearchForm)\nrefs.formBtnClearValue.addEventListener('click', handlerformBtnClearValue)\n\n\n\n\n"],"names":["refs","removeClassCategory","className","allBtn","item","loadMoreBtnIsVisible","loadMoreBtnIsHidden","modalClose","modalOpen","API_BASE_URL","API_ENDPOINTS","ITEMS_PER_PAGE","axios","getCategories","getProducts","currentPage","skip","data","getOneCategory","category","getIdProduct","id","getSearchProduct","search","renderProducts","products","markup","thumbnail","title","brand","price","renderCategories","categories","clearProducts","renderModalProduct","tags","description","shippingInformation","returnPolicy","marcup","textCategory","isSearch","searchValue","idProduct","initHomePage","total","error","handlerCategoriesList","event","handlerLoadMoreBtn","handlerProductsList","product","handlerSearchForm","handlerformBtnClearValue"],"mappings":"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"}